Put the chicken thighs in a bowl and season with salt and pepper.Put all the marinade ingredients into a small food processor and blend to a paste – add a little water if needed.Pour the marinade over the chicken and mix thoroughly to make sure the chicken is completely covered. Cover and leave for as long as you can – at least a couple of hours, but overnight is better. If you are leaving it out for longer than an hour, put the chicken in the fridge.For the curry, heat the vegetable or coconut oil in a large casserole. Add the onion and cook on a medium heat for several minutes until starting to turn golden brown. Add the chicken and the marinade to the casserole – the idea is not to brown the chicken, but do give the marinade ingredients a couple of minutes to cook before adding the stock or water.Add the tomatoes, thyme and bay leaves and season with salt and pepper. Bring to the boil, then turn the heat down, cover, and leave to simmer for around 40 minutes.Add the pumpkin and cook for a further 10 minutes, covered. Pour in the lime juice and the rum, if using. Remove the lid and cook for another 5-10 minutes to reduce the sauce slightly and finish off cooking the pumpkin.Serve with steamed rice and topped with sliced spring onions and fresh parsley or coriander.