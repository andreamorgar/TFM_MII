Place the chicken pieces, red wine, vegetables, bay leaf, thyme and peppercorns in a large glass bowl and marinade in the fridge for 12 hours.Preheat the oven to 180C/350F/Gas 4.Remove the chicken from the wine and dry, strain the wine through a sieve and reserve the vegetables.Season the chicken pieces with salt and freshly ground black pepper. In a large heavy-based casserole or ovenproof  pan set over a high heat fry the meat until golden-brown all over (you may need to do this in batches).Remove the chicken from the pan, add the reserved vegetables to the same pan and brown. Add the wine and cook until the liquid has reduced in volume by half.Place the chicken back on top and pour over enough stock to almost cover the chicken. Bring to the boil.Cover with a cartouche (a lid made of baking paper placed directly over the ingredients) and cook in the oven for 35 minutes. Remove and set aside to rest.For the parsley mash, in a food processor blend the curly parsley with 2½ litres/4½ pints water.Place a colander inside a large bowl. Line the colander with a muslin cloth and add the ice. You will need this in the next step.In a large heavy-based pan, heat the parsley water, whisking continuously. When the temperature reaches approximately 80C/176F the chlorophyll will separate from the water. At this stage pour the liquid into the colander lined with muslin and set aside to drain for an hour, until a thick parsley purée is left in the muslin. Scrape this off and reserve for the mash.Place the potatoes in salted water and cook until soft.Meanwhile, strain the cooked coq au vin using a colander placed over a large pan or bowl.  Set aside the chicken pieces. Pass the sauce through a fine sieve lined with muslin and return to the heat to cook until the liquid has reduced in volume by half. Add the chicken back to the sauce and keep warm until ready to serve.For the parsley mash, drain the potatoes and push them through a potato ricer twice. Place the mash in a clean pan set over a low heat. Add the butter and stir until the butter has melted and incorporated into the potatoes. Add the milk and stir to combine. Now add the parsley purée and stir to combine.For the garnish, heat the olive oil in a small pan. Add the onions and fry until brown. Add the pancetta and fry until brown and crisp. Add the mushrooms, stock and butter. Cook until the stock has reduced to a thick sauce. Finish with the chopped parsley and set aside until ready to serve.To serve, place some mash in a heap or a large quenelle on each plate. Make a large well in the mash and fill with the sauce from the coq au vin. Add a few pieces of chicken and add the garnish.