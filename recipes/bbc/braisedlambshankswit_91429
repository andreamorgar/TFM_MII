For the lamb shanks, preheat the oven to 150C/300F/Gas 2.Season the lamb shanks with salt and freshly ground black pepper.Heat the oil in a large casserole over a medium heat. When the oil is hot, add the lamb shanks and fry on all sides until browned all over.Add the red wine and bring to a simmer. Continue to simmer until the volume of liquid has reduced by a third.Add the onion, garlic, rosemary and anchovy fillets and stir well to combine.Add enough of the hot beef stock to just cover the lamb (the bones should be protruding from the surface of the liquid). Return the mixture to a gentle simmer.Transfer the casserole to the oven and cook, uncovered, for three hours, turning the lamb shanks occasionally (about once every 45 minutes).Meanwhile, for the flageolet beans, heat half of the butter in a frying pan over a medium heat. When the butter is foaming, add the onion, garlic and rosemary and fry for 2-3 minutes, or until just softened.Add the tomatoes and cook for a further 2-3 minutes, or until they have broken down slightly.Add the drained flageolet beans and stir until heated through. Season, to taste, with salt and freshly ground black pepper.Add the remaining butter and stir until the butter has melted. Add the parsley and stir well to combine.When the lamb shanks are cooked through, remove them from the cooking liquid and set aside on a warm plate.Return the casserole to the hob and bring the cooking liquid to the boil. Boil for 4-5 minutes, or until it has reduced slightly.Strain the reduced cooking liquid through a fine sieve into a clean saucepan, then season, to taste, with salt and freshly ground black pepper. Add the butter and whisk until it has melted and the sauce is glossy.To serve, divide the flageolet beans equally among four serving plates. Place one lamb shank on top of each. Drizzle the reduced sauce over and around the lamb shanks.