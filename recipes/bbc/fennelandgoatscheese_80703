Pre-heat oven to 220C/425F/Gas 7.For the dough, heat a small frying pan and add the fennel seeds. Carefully heat the seeds (they may pop) until they release their aroma. Do not let them burn. Remove seeds from pan and crush in a pestle and mortar while still warm.Add the dried yeast to the warm water to activate.Add the olive oil to the flour and mix in the yeast and water mixture and the fennel seeds. Bring the ingredients together in a bowl to form a dough. On a flat surface, knead the dough for approximately two minutes, adding a little more flour to the kneading surface if the dough feels sticky and your wetting hands a little while kneading if it feels dry and unmalleable. Place dough in a bowl, cover with a damp cloth and put to one side.For the filling, toss the shallots in a bowl with two tablespoons of olive oil and season with salt and freshly ground black pepper. Spread out in a single layer on a baking tray. Split the head of garlic into separate cloves and toss in the same small bowl with two tablespoons of the olive oil. Season with salt and freshly ground black pepper. Place the unpeeled garlic cloves on the baking tray. Bake in the oven for about 20 minutes. The shallots should be turning brown at the edges and drying out. The garlic should be a pale golden colour.Cut the fennel bulbs in half, then cut away some of the heart. Slice the fennel thinly crossways. Heat the remaining 3 tablespoons of olive oil in a saucepan, add the fennel and cook over a medium heat, stirring frequently, until soft, golden and reduced in volume.When the garlic and shallots are cooked, remove from baking tray and allow to cool. Roughly chop the shallots. Peel the garlic and add the soft flesh from inside the cloves, along with the chopped shallots, to the fennel. When the mixture has cooled further, crumble the goats' cheese and the ricotta into the fennel mixture.Roll out dough thinly onto a floured work surface. Cut out four 16cm/6.5-inch rounds. Divide the fennel and cheese mixture among the four pastry rounds. Place the filling in the middle of each and fold the pastry in half, sealing the edges with a little water.Place the pasties on a baking tray and place in the oven. Bake for about 20-30 minutes. If the pasties are browning too quickly, turn the heat down slightly and increase the cooking time. Towards the end of cooking, brush the surface of each pasty with the beaten egg and cook for a final five minutes. The pasties should be a lovely golden brown. Remove from the oven, allow to cool slightly, and serve.