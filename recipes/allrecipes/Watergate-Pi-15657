Preheat oven to 350 degrees F (175 degrees C). To Make Crust: In a medium bowl combine flour and walnuts. Mix in softened butter or margarine until mixture is smooth. Spread mixture into the bottom of a 9x13 inch pan. Bake in preheated oven for 20 to 30 minutes, until set and lightly browned. Allow to cool. To Make Cream Cheese Layer: In a medium bowl, beat cream cheese until fluffy. Mix in vanilla extract, powdered sugar, and 1 cup of the whipped topping. Beat until smooth. Spread mixture over baked crust. Chill for 1 hour. To Make Pudding Layer: In a large bowl, whisk together pudding mix and milk. Mix until pudding thickens. Spread over cream cheese layer. Top with remaining whipped topping, and sprinkle with cherries and walnuts. Chill before serving.