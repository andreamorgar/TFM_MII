In a large skillet, melt the margarine. Add the sugar and dates; cooking and stirring until thick. Stir in the egg, and cook 5 more minutes over low heat. Remove from heat, mix in the cereal, nuts (or coconut), and vanilla. Let the mixture cool for a minute , then shape into walnut sized balls. Roll in confectioners' sugar, and serve.