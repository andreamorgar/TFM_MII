In a medium bowl, cream together butter or margarine and sugar. In a microwave-safe bowl, microwave chocolate until melted. Stir occasionally until chocolate is smooth. Stir in melted chocolate, then beat in the eggs one at a time. Stir in almonds. Pour mixture into pastry shell and chill in refrigerator. Prepare pudding mix according to package directions. Pour pudding over chocolate layer, then spread whipped topping over pudding. Sprinkle with grated chocolate. Chill several hours before serving.