In a medium microwave-safe bowl, combine sugar, flour, and cocoa powder. Mix well. While stirring, slowly pour in milk. Mix until smooth. Microwave cocoa mixture in 1 minute increments, stirring after each increment. Continue until mixture thickens, about 7 minutes. Slowly pour egg yolks into cocoa mixture, whisking rapidly until yolks are incorporated. Stir in vanilla extract and butter or margarine. Pour filling into baked pie shell. Chill before serving. Store in refrigerator.