Combine shallots and red chile peppers in a food processor; pulse until a very fine paste forms. Crack the crab claws and the big legs slightly. Heat oil in a wok or large skillet over medium-high heat until very hot; add crabs and cook until shells change color and meat is cooked through, about 10 minutes. Transfer crabs to a plate, reserving oil in the wok. Reduce heat under wok to medium-low and add chile pepper paste; cook and stir until fragrant, 1 to 2 minutes. Add garlic and ginger. Whisk ketchup, vinegar, and sugar together in a bowl; pour over garlic-ginger mixture and stir until sauce is well mixed. Return crab to sauce in the wok; cook and stir for 3 minutes more, seasoning with salt and pepper. Pour eggs into wok while continuously stirring to create strands in the sauce. Add water if sauce gets too dry. Remove wok from heat and garnish crabs with cilantro.