Cook shallot, ginger, garlic, salt, black pepper, and red pepper flakes in butter in a 10-inch heavy skillet over moderately low heat, stirring, until shallot is softened, about 5 minutes. Add sugar and cook, stirring, until dissolved. Add tomatoes and simmer over moderate heat, stirring occasionally, until thickened, 10 to 15 minutes. Cool jam to room temperature, then stir in lime juice and cilantro.