In a large kettle cook the onions in the butter over moderate heat, stirring frequently, for 40 minutes, or until they are golden brown. Sprinkle the onions with the flour and cook the mixture, stirring, for 3 minutes. Add the broth slowly, stir the soup constantly until it comes to a boil, and simmer it, covered, for 20 minutes. Season the soup with salt and pepper. Put 2 slices of the toast in each of 6 heated soup bowls, top each toast with 1 tablespoon of the Gruyère, and pour the soup over the toasts. (To serve the onion soup gratiné, arrange the 12 toasts on the bottom of a flameproof casserole, heap each of them with 1 tablespoon of the Gruyère and boil it under a preheated broiler about 4 inches from the heat for 3 minutes, or until the cheese is melted and bubbling.)