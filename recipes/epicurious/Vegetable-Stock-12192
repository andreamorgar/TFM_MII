In a stockpot or kettle cook the onions in the butter over moderate heat, stirring, until they are golden, add the leeks, the carrots, the celery, the mushrooms, the potato peelings, and 1/3 cup of the water, and simmer the mixture, covered, stirring occasionally, for 5 minutes. Add the remaining water, the lentils, the garlic, the peppercorns, the thyme, the bay leaf, the parsley,and the salt, bring the mixture to a boil, and simmer it, uncovered, for 2 hours. Strain the stock through a fine sieve into a bowl and let it cool. Chill the stock and remove the fat.